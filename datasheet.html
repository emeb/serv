<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Datasheet &#8212; SERV  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="https://wavedrom.com/skins/default.js"></script>
    <script src="https://wavedrom.com/wavedrom.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Internals" href="internals.html" />
    <link rel="prev" title="SERV user manual" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="datasheet">
<h1>Datasheet<a class="headerlink" href="#datasheet" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The SERV RISC-V CPU is an award-winning and highly compact processor core based on the RISC-V instruction set architecture (ISA). It is designed to be the smallest possible RISC-V compliant CPU and is particularly well-suited for embedded systems and applications where silicon area is critical.</p>
<section id="key-features">
<h3>Key Features<a class="headerlink" href="#key-features" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>ISA:</strong> RISC-V RV32IZifencei</p></li>
<li><p><strong>Optional ISA extensions:</strong> C, M, Zicsr</p></li>
<li><p><strong>Optional features:</strong> Timer interrupts, Extension interface</p></li>
<li><p><strong>Architecture:</strong> Bit-serial (one bit processed per clock cycle)</p></li>
<li><p><strong>License:</strong> ISC (available under other commercial licenses upon request)</p></li>
<li><p><strong>OS support:</strong> Zephyr 3.7</p></li>
<li><p><strong>SW support:</strong> Compatible with standard RISC-V toolchains</p></li>
<li><p><strong>Area:</strong> Smallest RISC-V core available</p></li>
</ul>
</section>
<section id="applications">
<h3>Applications<a class="headerlink" href="#applications" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Embedded Systems:</strong> Ideal for minimalistic embedded control tasks</p></li>
<li><p><strong>IoT Devices:</strong> Suitable for Internet of Things devices where space and power are limited</p></li>
<li><p><strong>Education:</strong> Excellent resource for teaching and understanding the RISC-V architecture and CPU design</p></li>
<li><p><strong>Research:</strong> Platform for research in minimalistic computing designs and for bringing up new fabrication processes</p></li>
</ul>
</section>
<section id="area">
<h3>Area<a class="headerlink" href="#area" title="Link to this heading">¶</a></h3>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Area for minimal configuration <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Lattice iCE40</p></th>
<th class="head"><p>Altera Cyclone10LP</p></th>
<th class="head"><p>AMD Artix-7</p></th>
<th class="head"><p>CMOS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>198LUT/164FF</p></td>
<td><p>239LUT/164FF</p></td>
<td><p>125LUT/164FF</p></td>
<td><p>2.1kGE</p></td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Excluding register file</p>
</aside>
</aside>
</section>
</section>
<section id="interface">
<h2>Interface<a class="headerlink" href="#interface" title="Link to this heading">¶</a></h2>
<section id="top-level">
<h3>Top level<a class="headerlink" href="#top-level" title="Link to this heading">¶</a></h3>
<p>Users of SERV can choose to use either serv_top or serv_rf_top depending on what best fits the application. serv_top contains all the main logic of SERV except for the actual storage for the register file (RF).</p>
<img alt="_images/serv_top.png" src="_images/serv_top.png" />
<p>serv_rf_top is a convenience wrapper that combines serv_top with a memory-based RF (serf_rf_ram) and an adapter between them (serv_rf_ram_if). This allows users to choose between a drop-in implementation when the memory-based RF is good enough or supply an alternative RF implementation, such as a shift-register based one or a combined SRAM for instruction/data memory and RF.</p>
<img alt="_images/serv_rf_top.png" src="_images/serv_rf_top.png" />
<p>This means that serv_top exposes some additional pins to connect the RF which are not in serv_rf_top, while serv_rf_top has some extra parameters for configuring the RF. Aside from that, both modules expose a timer interrupt (only used when WITH_CSR=1), a rvfi formal interface (only available when RISCV_FORMAL is defined), an instruction bus, a data bus, and the extension interface.</p>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h3>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Parameters</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 9.1%" />
<col style="width: 18.2%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Values</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MDU</p></td>
<td><p>0 (default), 1</p></td>
<td><p>Enables the interface for connecting SERV and the Multiplication and Division Unit (MDU). Note that this only enables the interface and the decoder logic. The MDU itself must be connected externally as well.</p></td>
</tr>
<tr class="row-odd"><td><p>PRE_REGISTER</p></td>
<td><p>0, 1 (default)</p></td>
<td><div class="line-block">
<div class="line">Register signals before or after the decoder</div>
<div class="line">0 : Register after the decoder. Faster but uses more resources</div>
<div class="line">1 : (default) Register before the decoder. Slower but uses less resources</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>RESET_PC</p></td>
<td><p>0x00000000 (default) - 0xFFFFFFFC</p></td>
<td><p>Address of first instruction to fetch from memory after reset (Reset vector)</p></td>
</tr>
<tr class="row-odd"><td><p>RESET_STRATEGY</p></td>
<td><p>“MINI” (default), “NONE”</p></td>
<td><div class="line-block">
<div class="line">Amount of reset applied to design</div>
<div class="line">“NONE” : No reset at all. Relies on a POR to set correct initialization values and that core isn’t reset during runtime</div>
<div class="line">“MINI” : Standard setting. Resets the minimal amount of FFs needed to restart execution from the instruction at RESET_PC.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>RF_WIDTH</p></td>
<td><p>2 (default), 4, 8, 16, 32</p></td>
<td><p>(serv_rf_top only) Width of the RF memory. Typically smaller values use less resources, but can be implementation-dependant.</p></td>
</tr>
<tr class="row-odd"><td><p>WITH_CSR</p></td>
<td><p>0, 1 (default)</p></td>
<td><p>Enable Zicsr extension. This also enables timer IRQ and exception handling. Note that SERV only implements a small subset of the CSR registers.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="signals">
<h3>Signals<a class="headerlink" href="#signals" title="Link to this heading">¶</a></h3>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Signals</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 8.3%" />
<col style="width: 4.2%" />
<col style="width: 62.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Signal</p></th>
<th class="head"><p>Width</p></th>
<th class="head"><p>Direction</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>clk</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Clock</p></td>
</tr>
<tr class="row-odd"><td><p>i_rst</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Synchronous reset</p></td>
</tr>
<tr class="row-even"><td><p>i_timer_irq</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Timer interrupt</p></td>
</tr>
<tr class="row-odd"><td><p>o_ibus_adr</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Instruction bus address</p></td>
</tr>
<tr class="row-even"><td><p>o_ibus_cyc</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Instruction bus active cycle</p></td>
</tr>
<tr class="row-odd"><td><p>i_ibus_rdt</p></td>
<td><p>32</p></td>
<td><p>in</p></td>
<td><p>Instruction bus read data</p></td>
</tr>
<tr class="row-even"><td><p>i_ibus_ack</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Instruction bus cycle acknowledged</p></td>
</tr>
<tr class="row-odd"><td><p>o_dbus_adr</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Data bus address</p></td>
</tr>
<tr class="row-even"><td><p>o_dbus_dat</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Data bus write data</p></td>
</tr>
<tr class="row-odd"><td><p>o_dbus_sel</p></td>
<td><p>4</p></td>
<td><p>out</p></td>
<td><p>Data bus write data byte select mask</p></td>
</tr>
<tr class="row-even"><td><p>o_dbus_we</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Data bus write transaction</p></td>
</tr>
<tr class="row-odd"><td><p>o_dbus_cyc</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>Data bus active cycle</p></td>
</tr>
<tr class="row-even"><td><p>i_dbus_rdt</p></td>
<td><p>32</p></td>
<td><p>in</p></td>
<td><p>Data bus return data</p></td>
</tr>
<tr class="row-odd"><td><p>i_dbus_ack</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Data bus return data valid</p></td>
</tr>
<tr class="row-even"><td><p>o_ext_rs1</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Extension interface RS1 contents</p></td>
</tr>
<tr class="row-odd"><td><p>o_ext_rs2</p></td>
<td><p>32</p></td>
<td><p>out</p></td>
<td><p>Extension interface RS2 contents</p></td>
</tr>
<tr class="row-even"><td><p>o_ext_funct3</p></td>
<td><p>3</p></td>
<td><p>out</p></td>
<td><p>Extension interface funct3 contents</p></td>
</tr>
<tr class="row-odd"><td><p>i_ext_rd</p></td>
<td><p>32</p></td>
<td><p>in</p></td>
<td><p>Extension interface RD contents</p></td>
</tr>
<tr class="row-even"><td><p>i_ext_ready</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>Extension interface RD contents valid</p></td>
</tr>
<tr class="row-odd"><td><p>o_mdu_valid</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>MDU request</p></td>
</tr>
<tr class="row-even"><td><p><strong>serv_top only</strong></p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>o_rf_rreq</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface read request</p></td>
</tr>
<tr class="row-even"><td><p>o_rf_wreq</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface write request</p></td>
</tr>
<tr class="row-odd"><td><p>i_rf_ready</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>RF interface request acknowledged</p></td>
</tr>
<tr class="row-even"><td><p>o_wreg0</p></td>
<td><p>5 + WITH_CSR</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 0 write address</p></td>
</tr>
<tr class="row-odd"><td><p>o_wreg1</p></td>
<td><p>5 + WITH_CSR</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 1 write address</p></td>
</tr>
<tr class="row-even"><td><p>o_wen0</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 0 write enable</p></td>
</tr>
<tr class="row-odd"><td><p>o_wen1</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 1 write enable</p></td>
</tr>
<tr class="row-even"><td><p>o_wdata0</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 0 write data</p></td>
</tr>
<tr class="row-odd"><td><p>o_wdata1</p></td>
<td><p>1</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 1 write data</p></td>
</tr>
<tr class="row-even"><td><p>o_rreg0</p></td>
<td><p>5 + WITH_CSR</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 0 read address</p></td>
</tr>
<tr class="row-odd"><td><p>o_rreg1</p></td>
<td><p>5 + WITH_CSR</p></td>
<td><p>out</p></td>
<td><p>RF interface channel 1 read address</p></td>
</tr>
<tr class="row-even"><td><p>i_rdata0</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>RF interface channel 0 read data</p></td>
</tr>
<tr class="row-odd"><td><p>i_rdata1</p></td>
<td><p>1</p></td>
<td><p>in</p></td>
<td><p>RF interface channel 1 read data</p></td>
</tr>
</tbody>
</table>
</section>
<section id="extension-interface">
<h3>Extension interface<a class="headerlink" href="#extension-interface" title="Link to this heading">¶</a></h3>
<p>The SERV CPU, being the smallest RISC-V CPU, has a design that is primarily focused on simplicity and minimalism. However, to increase its utility without complicating the core design, it can be extended using an extension interface. The extension interface allows additional functionality to be added to the SERV CPU core through custom accelerators that are called for when specific instructions are encountered. SERV has built-in support for connecting an MDU (Multiplication/Division Unit) that implements the M ISA extension by setting the MDU parameter. Other accelerators need changes to the decoder.</p>
<p>When SERV detects instructions to be executed by an external accelerator through the extension interface, it will treat them as <span class="xref std std-ref">two-stage operations</span>. In stage 1, the values in <cite>o_ext_rs1</cite> and <cite>o_ext_rs2</cite> are prepared to be sent to the accelerator. Once stage 1 is completed, SERV will assert the corresponding valid signal for the accelerator (e.g. <cite>o_mdu_valid</cite> for the M extension accelerator). The accelerator can now perform its work and when it has completed its result it will return that value in <cite>i_ext_rd</cite> and strobe <cite>i_ext_ready</cite> for one cycle. The following cycle, SERV will start stage two and store the received result. The waveform below explains this in more detail.</p>

<div style="overflow-x:auto">
<script type="WaveDrom">
{ signal: [
  { name: "clk"        , wave: "P...|...|...|..."},
  { name: "init"       , wave: "1...|..0|...|...", node: ".......d..", data: "r0"},
  { name: "o_rf_wreq"  , wave: "0...|...|10.|...", node: ".........g", data: "r1"},
  { name: "i_rf_ready" , wave: "010.|...|10.|...", node: ".a.......h.", data: "r1"},
  { name: "cnt_en"     , wave: "0.1.|..0|.1.|..0", node: "..b.......i"},
  { name: "cnt_done"   , wave: "0...|.10|...|.10", node: "......c.."},
  { name: "o_ext_rs1"  , wave: ".234567x|...|...", node: "..", data: "d0 d1 ... d30 d31"},
  { name: "o_ext_rs2"  , wave: ".234567x|...|...", node: "..", data: "d0 d1 ... d30 d31"},
  { name: "o_mdu_valid", wave: "0...|..1|.0.|...", node: ".......e", data: "0 1 ... 30 31"},
  { name: "i_ext_ready", wave: "0...|...|10.|...", node: ".........f", data: "0 1 ... 30 31"},
  { name: "i_ext_rd"   , wave: "....|...|234567x", node: "..", data: "d0 d1 ... d30 d31"},
  ],
  edge : [
  "a~>b", "c~>d", "e~>f", "f~>g", "h~>i"]
}
</script>
</div>
</section>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SERV</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Datasheet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#key-features">Key Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#applications">Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#area">Area</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interface">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#top-level">Top level</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signals">Signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extension-interface">Extension interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="reservoir.html">Building systems with SERV</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">SERV user manual</a></li>
      <li>Next: <a href="internals.html" title="next chapter">Internals</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, Olof Kindgren.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/datasheet.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>